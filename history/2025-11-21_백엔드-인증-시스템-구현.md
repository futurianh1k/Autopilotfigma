# ë³€ê²½ ì´ë ¥: ë°±ì—”ë“œ ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„

**ë‚ ì§œ**: 2025-11-21  
**ì‘ì„±ì**: AI Assistant  
**ë¸Œëœì¹˜**: feature/backend-auth  
**ì£¼ìš” ë³€ê²½**: ë°±ì—”ë“œ ì¸ì¦ ë° ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œ ì „ì²´ êµ¬í˜„

---

## ğŸ“‹ ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­

ì‚¬ìš©ìê°€ ìš”ì²­í•œ ë°±ì—”ë“œ ê¸°ë³¸ ê¸°ëŠ¥:

### 1. íšŒì›ê°€ì… ê¸°ëŠ¥
- âœ… ì´ë©”ì¼ íšŒì›ê°€ì…
- âœ… Google OAuth íšŒì›ê°€ì…
- âœ… Kakao OAuth íšŒì›ê°€ì…

### 2. ë¡œê·¸ì¸ ê¸°ëŠ¥
- âœ… ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸
- âœ… JWT ê¸°ë°˜ ì¸ì¦ (Access Token + Refresh Token)
- âœ… ì„¸ì…˜ ê´€ë¦¬

### 3. 2Factor ì¸ì¦ (2FA)
- âœ… TOTP ê¸°ë°˜ 2ë‹¨ê³„ ì¸ì¦
- âœ… QR ì½”ë“œ ìƒì„±
- âœ… ë°±ì—… ì½”ë“œ 10ê°œ ì œê³µ
- âœ… 2FA í™œì„±í™”/ë¹„í™œì„±í™”

### 4. ìœ ì € í”„ë¡œí•„ ê´€ë¦¬
- âœ… í”„ë¡œí•„ ì¡°íšŒ (GET)
- âœ… í”„ë¡œí•„ ì—…ë°ì´íŠ¸ (PATCH)
- âœ… ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- âœ… ê³„ì • ì‚­ì œ

### 5. ë°ì´í„° ì•”í˜¸í™”
- âœ… ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (bcrypt, Salt Rounds: 12)
- âœ… ê°œì¸ì •ë³´ ì•”í˜¸í™” (AES-256-GCM)
  - ì „í™”ë²ˆí˜¸
  - ì£¼ì†Œ
  - ìƒë…„ì›”ì¼
- âœ… API í‚¤ í•´ì‹± (SHA-256)
- âœ… 2FA ì‹œí¬ë¦¿ ì•”í˜¸í™”

---

## ğŸ’¬ AI ì‘ë‹µ ë‚´ìš©

### ë¶„ì„

ìš”ì²­ì‚¬í•­ì€ Enterpriseê¸‰ ë°±ì—”ë“œ ì¸ì¦ ì‹œìŠ¤í…œ êµ¬ì¶•ì…ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ì•„í‚¤í…ì²˜ë¥¼ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤:

#### ê¸°ìˆ  ìŠ¤íƒ ì„ ì •
1. **Backend Framework**: Express.js + TypeScript
   - ê°€ë³ê³  ìœ ì—°í•œ êµ¬ì¡°
   - í’ë¶€í•œ ìƒíƒœê³„
   - TypeScriptë¡œ íƒ€ì… ì•ˆì •ì„± í™•ë³´

2. **Database**: PostgreSQL + Prisma ORM
   - ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ (ë¬´ê²°ì„±)
   - Prismaì˜ íƒ€ì… ì•ˆì „ì„±
   - ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬ ìš©ì´

3. **Authentication**:
   - JWT (Access: 15ë¶„, Refresh: 7ì¼)
   - Passport.js (OAuth í†µí•©)
   - bcrypt (ë¹„ë°€ë²ˆí˜¸ í•´ì‹±)

4. **Security**:
   - AES-256-GCM (ëŒ€ì¹­ ì•”í˜¸í™”)
   - TOTP (2FA)
   - Rate Limiting
   - Helmet (ë³´ì•ˆ í—¤ë”)

### êµ¬í˜„ ê³„íš

#### Phase 1: í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ê³„ âœ…
```
server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/       # ì„¤ì • (DB, Passport)
â”‚   â”œâ”€â”€ controllers/  # API í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ middleware/   # ì¸ì¦, ê²€ì¦
â”‚   â”œâ”€â”€ models/       # Prisma ëª¨ë¸
â”‚   â”œâ”€â”€ routes/       # ë¼ìš°íŠ¸ ì •ì˜
â”‚   â”œâ”€â”€ services/     # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ utils/        # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ server.ts     # ì§„ì…ì 
â””â”€â”€ tests/           # í…ŒìŠ¤íŠ¸
```

#### Phase 2: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ âœ…
- User: ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´
- Session: JWT í† í° ì¶”ì 
- UserProfile: ì•”í˜¸í™”ëœ ê°œì¸ì •ë³´
- ApiKey: API í‚¤ ê´€ë¦¬
- TwoFactorBackupCode: 2FA ë°±ì—… ì½”ë“œ
- AuditLog: ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê·¸

#### Phase 3: í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„ âœ…
1. ì•”í˜¸í™” ìœ í‹¸ë¦¬í‹°
2. JWT ìœ í‹¸ë¦¬í‹°
3. 2FA ìœ í‹¸ë¦¬í‹°
4. ì¸ì¦ ì„œë¹„ìŠ¤ & ì»¨íŠ¸ë¡¤ëŸ¬
5. í”„ë¡œí•„ ì„œë¹„ìŠ¤ & ì»¨íŠ¸ë¡¤ëŸ¬
6. API í‚¤ ì„œë¹„ìŠ¤ & ì»¨íŠ¸ë¡¤ëŸ¬
7. OAuth í†µí•©

---

## ğŸ”§ ìˆ˜ì • ë‚´ìš© ìƒì„¸

### ìƒì„±ëœ íŒŒì¼ ëª©ë¡ (ì´ 26ê°œ)

#### ğŸ“ server/prisma/
1. **schema.prisma** (3,967 bytes)
   - ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì •ì˜
   - 8ê°œ ëª¨ë¸: User, Session, UserProfile, ApiKey ë“±

#### ğŸ“ server/src/config/
2. **database.ts** (751 bytes)
   - Prisma í´ë¼ì´ì–¸íŠ¸ ì‹±ê¸€í†¤
3. **passport.ts** (4,855 bytes)
   - Google/Kakao OAuth ì „ëµ ì„¤ì •

#### ğŸ“ server/src/utils/
4. **encryption.ts** (4,221 bytes)
   - AES-256-GCM ì•”í˜¸í™”/ë³µí˜¸í™”
   - bcrypt ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
   - API í‚¤ ìƒì„± ë° í•´ì‹±
   - **ì¶œì²˜**: Node.js crypto, bcryptjs
5. **jwt.ts** (3,809 bytes)
   - JWT ìƒì„±/ê²€ì¦
   - Access/Refresh Token ê´€ë¦¬
   - **ì¶œì²˜**: jsonwebtoken
6. **twoFactor.ts** (3,122 bytes)
   - TOTP ìƒì„±/ê²€ì¦
   - QR ì½”ë“œ ìƒì„±
   - ë°±ì—… ì½”ë“œ ìƒì„±
   - **ì¶œì²˜**: otplib, qrcode

#### ğŸ“ server/src/middleware/
7. **auth.ts** (3,060 bytes)
   - JWT ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
   - ì‚¬ìš©ì ì„¸ì…˜ ê²€ì¦
8. **validation.ts** (3,062 bytes)
   - Zod ìŠ¤í‚¤ë§ˆ ê²€ì¦
   - ì…ë ¥ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
   - **ì¶œì²˜**: zod

#### ğŸ“ server/src/services/
9. **authService.ts** (7,195 bytes)
   - íšŒì›ê°€ì…/ë¡œê·¸ì¸ ë¡œì§
   - 2FA ì´ˆê¸°í™”/í™œì„±í™”/ë¹„í™œì„±í™”
   - ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
10. **profileService.ts** (4,444 bytes)
    - í”„ë¡œí•„ CRUD
    - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
    - ê³„ì • ì‚­ì œ
11. **apiKeyService.ts** (3,380 bytes)
    - API í‚¤ ìƒì„±/ê²€ì¦
    - API í‚¤ ëª©ë¡ ì¡°íšŒ
    - ë¹„í™œì„±í™”/ì‚­ì œ

#### ğŸ“ server/src/controllers/
12. **authController.ts** (4,212 bytes)
    - ì¸ì¦ API í•¸ë“¤ëŸ¬
13. **profileController.ts** (2,618 bytes)
    - í”„ë¡œí•„ API í•¸ë“¤ëŸ¬
14. **apiKeyController.ts** (2,714 bytes)
    - API í‚¤ API í•¸ë“¤ëŸ¬
15. **oauthController.ts** (1,906 bytes)
    - OAuth ì½œë°± í•¸ë“¤ëŸ¬

#### ğŸ“ server/src/routes/
16. **authRoutes.ts** (837 bytes)
    - ì¸ì¦ ë¼ìš°íŠ¸ ì •ì˜
17. **profileRoutes.ts** (704 bytes)
    - í”„ë¡œí•„ ë¼ìš°íŠ¸ ì •ì˜
18. **apiKeyRoutes.ts** (664 bytes)
    - API í‚¤ ë¼ìš°íŠ¸ ì •ì˜
19. **oauthRoutes.ts** (967 bytes)
    - OAuth ë¼ìš°íŠ¸ ì •ì˜

#### ğŸ“ server/src/
20. **server.ts** (2,924 bytes)
    - Express ì•± ì„¤ì •
    - ë¯¸ë“¤ì›¨ì–´ í†µí•©
    - ë¼ìš°íŠ¸ ë“±ë¡

#### ğŸ“ server/tests/unit/
21. **encryption.test.ts** (5,526 bytes)
    - ì•”í˜¸í™” ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
    - 13ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

#### ğŸ“ server/
22. **package.json** (1,441 bytes)
    - ì˜ì¡´ì„± ì •ì˜ (22ê°œ íŒ¨í‚¤ì§€)
23. **tsconfig.json** (658 bytes)
    - TypeScript ì„¤ì •
24. **vitest.config.ts** (412 bytes)
    - Vitest í…ŒìŠ¤íŠ¸ ì„¤ì •
25. **.env.example** (1,149 bytes)
    - í™˜ê²½ ë³€ìˆ˜ ì˜ˆì œ
26. **README.md** (6,409 bytes)
    - ìƒì„¸ ë¬¸ì„œí™”

---

## ğŸ“Š ê¸°ëŠ¥ë³„ êµ¬í˜„ ìƒì„¸

### 1ï¸âƒ£ ì´ë©”ì¼ íšŒì›ê°€ì…/ë¡œê·¸ì¸

#### íšŒì›ê°€ì… í”Œë¡œìš°
```
ì‚¬ìš©ì ì…ë ¥ (ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸, ì´ë¦„)
  â†“
Zod ê²€ì¦ (ì´ë©”ì¼ í˜•ì‹, ë¹„ë°€ë²ˆí˜¸ ê°•ë„)
  â†“
ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
  â†“
bcrypt í•´ì‹± (Salt Rounds: 12)
  â†“
DB ì €ì¥ (User í…Œì´ë¸”)
  â†“
ì´ë©”ì¼ ì¸ì¦ í† í° ìƒì„±
  â†“
ê°ì‚¬ ë¡œê·¸ ê¸°ë¡
```

#### ë¡œê·¸ì¸ í”Œë¡œìš°
```
ì‚¬ìš©ì ì…ë ¥ (ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸, 2FA ì½”ë“œ)
  â†“
ì‚¬ìš©ì ì¡°íšŒ (ì´ë©”ì¼)
  â†“
ê³„ì • ìƒíƒœ í™•ì¸ (í™œì„±/ì ê¸ˆ)
  â†“
ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ (bcrypt.compare)
  â†“
2FA í™œì„±í™” ì—¬ë¶€ í™•ì¸
  â”œâ”€ í™œì„±í™”: TOTP ì½”ë“œ ê²€ì¦
  â””â”€ ë¹„í™œì„±í™”: í†µê³¼
  â†“
JWT í† í° ìƒì„± (Access + Refresh)
  â†“
ì„¸ì…˜ ìƒì„± (DB ì €ì¥)
  â†“
ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ (ì‹¤íŒ¨ íšŸìˆ˜ ì´ˆê¸°í™”)
  â†“
ê°ì‚¬ ë¡œê·¸ ê¸°ë¡
```

### 2ï¸âƒ£ Google/Kakao OAuth

#### OAuth í”Œë¡œìš°
```
ì‚¬ìš©ì: OAuth ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
  â†“
Frontend: /api/oauth/google í˜¸ì¶œ
  â†“
Backend: Google ì¸ì¦ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
  â†“
ì‚¬ìš©ì: Google ê³„ì • ì„ íƒ ë° ê¶Œí•œ ìŠ¹ì¸
  â†“
Google: /api/oauth/google/callback í˜¸ì¶œ
  â†“
Backend: Passport Strategy ì‹¤í–‰
  â”œâ”€ í”„ë¡œí•„ ì •ë³´ íšë“ (email, name, photo)
  â”œâ”€ ê¸°ì¡´ ì‚¬ìš©ì í™•ì¸ (email or providerId)
  â”œâ”€ ì‹ ê·œ: User ìƒì„±
  â””â”€ ê¸°ì¡´: User ì—…ë°ì´íŠ¸
  â†“
JWT í† í° ìƒì„±
  â†“
ì„¸ì…˜ ìƒì„±
  â†“
Frontendë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (í† í° í¬í•¨)
  â†“
Frontend: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— í† í° ì €ì¥
```

### 3ï¸âƒ£ 2FA (TOTP)

#### 2FA ì´ˆê¸°í™”
```
ì‚¬ìš©ì: 2FA í™œì„±í™” ìš”ì²­
  â†“
Backend: ì‹œí¬ë¦¿ ìƒì„± (Base32)
  â†“
OTP Auth URL ìƒì„± (otpauth://...)
  â†“
QR ì½”ë“œ ìƒì„± (Data URL)
  â†“
ì‹œí¬ë¦¿ ì•”í˜¸í™” (AES-256-GCM)
  â†“
DB ì €ì¥ (User.twoFactorSecret)
  â†“
Frontend: QR ì½”ë“œ í‘œì‹œ
```

#### 2FA í™œì„±í™”
```
ì‚¬ìš©ì: ì¸ì¦ ì•±ì—ì„œ 6ìë¦¬ ì½”ë“œ ì…ë ¥
  â†“
Backend: ì‹œí¬ë¦¿ ë³µí˜¸í™”
  â†“
TOTP ê²€ì¦ (authenticator.verify)
  â†“
ê²€ì¦ ì„±ê³µ ì‹œ:
  â”œâ”€ User.twoFactorEnabled = true
  â”œâ”€ ë°±ì—… ì½”ë“œ 10ê°œ ìƒì„±
  â”œâ”€ ë°±ì—… ì½”ë“œ í•´ì‹± í›„ DB ì €ì¥
  â””â”€ ë°±ì—… ì½”ë“œ ë°˜í™˜ (1íšŒë§Œ)
```

### 4ï¸âƒ£ í”„ë¡œí•„ ê´€ë¦¬

#### ê°œì¸ì •ë³´ ì•”í˜¸í™”
```typescript
// ì•”í˜¸í™” ì €ì¥
const encrypted = encrypt(phoneNumber, ENCRYPTION_KEY);
await prisma.userProfile.update({
  data: { phoneNumber: encrypted }
});

// ë³µí˜¸í™” ì¡°íšŒ
const profile = await prisma.userProfile.findUnique(...);
const decrypted = decrypt(profile.phoneNumber, ENCRYPTION_KEY);
```

#### ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
```
í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ í™•ì¸
  â†“
ìƒˆ ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ (ê°•ë„ í™•ì¸)
  â†“
bcrypt í•´ì‹±
  â†“
DB ì—…ë°ì´íŠ¸
  â†“
ëª¨ë“  ì„¸ì…˜ ë¬´íš¨í™” (ë³´ì•ˆ)
  â†“
ê°ì‚¬ ë¡œê·¸ ê¸°ë¡
```

### 5ï¸âƒ£ API í‚¤ ê´€ë¦¬

#### API í‚¤ ìƒì„±
```
ì‚¬ìš©ì ì…ë ¥ (ì´ë¦„, ê¶Œí•œ)
  â†“
ëœë¤ í‚¤ ìƒì„± (64ìë¦¬ hex)
  â†“
SHA-256 í•´ì‹±
  â†“
DB ì €ì¥ (í•´ì‹œê°’ë§Œ ì €ì¥)
  â†“
ì‹¤ì œ í‚¤ ë°˜í™˜ (1íšŒë§Œ)
```

#### API í‚¤ ê²€ì¦
```
ìš”ì²­ í—¤ë”ì—ì„œ API í‚¤ ì¶”ì¶œ
  â†“
SHA-256 í•´ì‹±
  â†“
DB ì¡°íšŒ (í•´ì‹œ ë§¤ì¹­)
  â†“
í™œì„± ìƒíƒœ í™•ì¸
  â†“
ë§Œë£Œ ì—¬ë¶€ í™•ì¸
  â†“
ì‚¬ìš©ì ìƒíƒœ í™•ì¸
  â†“
ë§ˆì§€ë§‰ ì‚¬ìš© ì‹œê°„ ì—…ë°ì´íŠ¸
```

---

## ğŸ” ë³´ì•ˆ êµ¬í˜„ ìƒì„¸

### ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜

#### 1. ë¹„ë°€ë²ˆí˜¸ (bcrypt)
```typescript
// í•´ì‹±
const hash = await bcrypt.hash(password, 12);
// í˜•ì‹: $2a$12$[22ì ì†”íŠ¸][31ì í•´ì‹œ]

// ê²€ì¦
const isValid = await bcrypt.compare(password, hash);
```

#### 2. ê°œì¸ì •ë³´ (AES-256-GCM)
```typescript
// ì•”í˜¸í™”
const iv = crypto.randomBytes(16);
const cipher = crypto.createCipheriv('aes-256-gcm', key, iv);
const encrypted = cipher.update(text, 'utf8', 'hex') + cipher.final('hex');
const authTag = cipher.getAuthTag();
// í˜•ì‹: iv:authTag:encrypted (hex)

// ë³µí˜¸í™”
const [ivHex, tagHex, data] = encrypted.split(':');
const decipher = crypto.createDecipheriv('aes-256-gcm', key, Buffer.from(ivHex, 'hex'));
decipher.setAuthTag(Buffer.from(tagHex, 'hex'));
const decrypted = decipher.update(data, 'hex', 'utf8') + decipher.final('utf8');
```

#### 3. API í‚¤ (SHA-256)
```typescript
const hash = crypto.createHash('sha256').update(apiKey).digest('hex');
// 64ìë¦¬ hex ë¬¸ìì—´
```

### JWT êµ¬ì¡°

```json
{
  "header": {
    "alg": "HS256",
    "typ": "JWT"
  },
  "payload": {
    "userId": "uuid",
    "email": "user@example.com",
    "type": "access",
    "iat": 1234567890,
    "exp": 1234568790,
    "iss": "landing-page-backend",
    "aud": "landing-page-frontend"
  }
}
```

---

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

### ì¸ì¦ (Auth)
| Method | Endpoint | ê¸°ëŠ¥ |
|--------|----------|------|
| POST | /api/auth/register | ì´ë©”ì¼ íšŒì›ê°€ì… |
| POST | /api/auth/login | ë¡œê·¸ì¸ |
| POST | /api/auth/logout | ë¡œê·¸ì•„ì›ƒ |
| GET | /api/auth/2fa/init | 2FA ì´ˆê¸°í™” |
| POST | /api/auth/2fa/enable | 2FA í™œì„±í™” |
| POST | /api/auth/2fa/disable | 2FA ë¹„í™œì„±í™” |

### OAuth
| Method | Endpoint | ê¸°ëŠ¥ |
|--------|----------|------|
| GET | /api/oauth/google | Google ë¡œê·¸ì¸ |
| GET | /api/oauth/google/callback | Google ì½œë°± |
| GET | /api/oauth/kakao | Kakao ë¡œê·¸ì¸ |
| GET | /api/oauth/kakao/callback | Kakao ì½œë°± |

### í”„ë¡œí•„
| Method | Endpoint | ê¸°ëŠ¥ |
|--------|----------|------|
| GET | /api/profile | í”„ë¡œí•„ ì¡°íšŒ |
| PATCH | /api/profile | í”„ë¡œí•„ ì—…ë°ì´íŠ¸ |
| POST | /api/profile/change-password | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ |
| DELETE | /api/profile | ê³„ì • ì‚­ì œ |

### API í‚¤
| Method | Endpoint | ê¸°ëŠ¥ |
|--------|----------|------|
| POST | /api/keys | API í‚¤ ìƒì„± |
| GET | /api/keys | API í‚¤ ëª©ë¡ |
| PATCH | /api/keys/:keyId/deactivate | ë¹„í™œì„±í™” |
| DELETE | /api/keys/:keyId | ì‚­ì œ |

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

### ì‘ì„±ëœ í…ŒìŠ¤íŠ¸

#### encryption.test.ts (13ê°œ í…ŒìŠ¤íŠ¸)
```
âœ… encrypt/decrypt
  - ì•”í˜¸í™”/ë³µí˜¸í™” ì •ìƒ ë™ì‘
  - ì•”í˜¸í™” í˜•ì‹ ê²€ì¦ (iv:authTag:encrypted)
  - ì˜ëª»ëœ í‚¤ë¡œ ë³µí˜¸í™” ì‹œ ì—ëŸ¬
  - ë™ì¼ í‰ë¬¸ë„ ë‹¤ë¥´ê²Œ ì•”í˜¸í™” (ëœë¤ IV)

âœ… hashPassword/comparePassword
  - ë¹„ë°€ë²ˆí˜¸ í•´ì‹± ì •ìƒ ë™ì‘
  - ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ì •ìƒ ë™ì‘
  - ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ëŠ” ë¶ˆì¼ì¹˜
  - ë™ì¼ ë¹„ë°€ë²ˆí˜¸ë„ ë‹¤ë¥´ê²Œ í•´ì‹± (ì†”íŠ¸)

âœ… generateApiKey
  - API í‚¤ ìƒì„± (64ìë¦¬ hex)
  - ì§€ì • ê¸¸ì´ë¡œ ìƒì„±
  - ë§¤ë²ˆ ë‹¤ë¥¸ í‚¤ ìƒì„±

âœ… hashApiKey
  - SHA-256 í•´ì‹± (64ìë¦¬ hex)
  - ë™ì¼ í‚¤ëŠ” ë™ì¼ í•´ì‹œ

âœ… generateToken
  - í† í° ìƒì„± (hex)
  - ë§¤ë²ˆ ë‹¤ë¥¸ í† í°

âœ… generateSecureRandomNumber
  - ì§€ì • ë²”ìœ„ ë‚´ ëœë¤ ìˆ«ì
  - ë²”ìœ„ê°€ 1ì¼ ë•Œ ì •í™•í•œ ê°’
  - ì¶©ë¶„íˆ ëœë¤í•œ ë¶„í¬
```

---

## ğŸ“¦ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ (ì´ 22ê°œ)

### í”„ë¡œë•ì…˜ ì˜ì¡´ì„±
```json
{
  "@prisma/client": "^6.1.0",
  "bcryptjs": "^2.4.3",
  "cors": "^2.8.5",
  "dotenv": "^16.4.7",
  "express": "^4.21.2",
  "express-rate-limit": "^7.5.0",
  "helmet": "^8.0.0",
  "jsonwebtoken": "^9.0.2",
  "otplib": "^12.0.1",
  "passport": "^0.7.0",
  "passport-google-oauth20": "^2.0.0",
  "passport-kakao": "^1.0.1",
  "qrcode": "^1.5.4",
  "winston": "^3.17.0",
  "zod": "^3.24.1"
}
```

### ê°œë°œ ì˜ì¡´ì„±
```json
{
  "@types/*": "ë‹¤ì–‘í•œ íƒ€ì… ì •ì˜",
  "prisma": "^6.1.0",
  "supertest": "^7.0.0",
  "tsx": "^4.19.2",
  "typescript": "^5.7.2",
  "vitest": "^2.1.8"
}
```

---

## ğŸ“ ìš”ì•½

### ë‹¬ì„±í•œ ëª©í‘œ

âœ… **ëª¨ë“  ìš”êµ¬ì‚¬í•­ 100% êµ¬í˜„ ì™„ë£Œ**

1. âœ… ì´ë©”ì¼ íšŒì›ê°€ì…/ë¡œê·¸ì¸
2. âœ… Google OAuth ì¸ì¦
3. âœ… Kakao OAuth ì¸ì¦
4. âœ… 2FA (TOTP) ì™„ë²½ êµ¬í˜„
5. âœ… í”„ë¡œí•„ ê´€ë¦¬ (CRUD)
6. âœ… ë°ì´í„° ì•”í˜¸í™” (ë¹„ë°€ë²ˆí˜¸, ê°œì¸ì •ë³´, API í‚¤)
7. âœ… API í‚¤ ê´€ë¦¬
8. âœ… ê°ì‚¬ ë¡œê·¸
9. âœ… Rate Limiting
10. âœ… ë³´ì•ˆ í—¤ë”

### íŒŒì¼ í†µê³„

- **ìƒì„±ëœ íŒŒì¼**: 26ê°œ
- **ì´ ì½”ë“œ ë¼ì¸**: ì•½ 3,500ì¤„
- **í…ŒìŠ¤íŠ¸ ì½”ë“œ**: 13ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
- **ë¬¸ì„œí™”**: ìƒì„¸ README.md

### ë³´ì•ˆ ìˆ˜ì¤€

- ğŸ”’ **ì•”í˜¸í™”**: AES-256-GCM (êµ°ì‚¬ê¸‰)
- ğŸ”’ **í•´ì‹±**: bcrypt (Salt Rounds: 12)
- ğŸ”’ **2FA**: TOTP (30ì´ˆ ê°±ì‹ )
- ğŸ”’ **Rate Limiting**: 15ë¶„ë‹¹ 100 ìš”ì²­
- ğŸ”’ **ê°ì‚¬ ë¡œê·¸**: ëª¨ë“  ì¤‘ìš” ì‘ì—… ê¸°ë¡

---

## ğŸ”— ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [Express.js](https://expressjs.com/)
- [Prisma ORM](https://www.prisma.io/docs)
- [Passport.js](https://www.passportjs.org/)
- [jsonwebtoken](https://www.npmjs.com/package/jsonwebtoken)
- [bcryptjs](https://www.npmjs.com/package/bcryptjs)
- [otplib](https://www.npmjs.com/package/otplib)
- [Zod](https://zod.dev/)

### ë³´ì•ˆ í‘œì¤€
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [JWT Best Practices (RFC 8725)](https://tools.ietf.org/html/rfc8725)
- [TOTP Algorithm (RFC 6238)](https://tools.ietf.org/html/rfc6238)

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ë¸Œëœì¹˜ ìƒì„± (feature/backend-auth)
- [x] í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ê³„
- [x] ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„
- [x] ì•”í˜¸í™” ìœ í‹¸ë¦¬í‹° êµ¬í˜„
- [x] JWT ìœ í‹¸ë¦¬í‹° êµ¬í˜„
- [x] 2FA ìœ í‹¸ë¦¬í‹° êµ¬í˜„
- [x] ì¸ì¦ ì„œë¹„ìŠ¤ êµ¬í˜„
- [x] í”„ë¡œí•„ ì„œë¹„ìŠ¤ êµ¬í˜„
- [x] API í‚¤ ì„œë¹„ìŠ¤ êµ¬í˜„
- [x] OAuth í†µí•© (Google, Kakao)
- [x] ë¯¸ë“¤ì›¨ì–´ êµ¬í˜„ (ì¸ì¦, ê²€ì¦)
- [x] ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„
- [x] ë¼ìš°íŠ¸ ì •ì˜
- [x] Express ì„œë²„ ì„¤ì •
- [x] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
- [x] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [x] README ë¬¸ì„œí™”
- [x] .gitignore ì—…ë°ì´íŠ¸
- [x] ë³€ê²½ ì´ë ¥ ë¬¸ì„œí™”

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### ê¶Œì¥ ì‚¬í•­
1. **ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰**
   ```bash
   cd server
   npm run prisma:migrate
   ```

2. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
   - `.env` íŒŒì¼ ìƒì„±
   - DB ì—°ê²° ì •ë³´ ì…ë ¥
   - JWT ì‹œí¬ë¦¿ ìƒì„±
   - OAuth í´ë¼ì´ì–¸íŠ¸ ID/Secret ì„¤ì •

3. **ì„œë²„ ì‹¤í–‰ í…ŒìŠ¤íŠ¸**
   ```bash
   npm run dev
   ```

4. **API í…ŒìŠ¤íŠ¸**
   - Postman ë˜ëŠ” Thunder Client ì‚¬ìš©
   - íšŒì›ê°€ì… â†’ ë¡œê·¸ì¸ â†’ 2FA â†’ í”„ë¡œí•„ ìˆœì„œë¡œ í…ŒìŠ¤íŠ¸

5. **í”„ë¡ íŠ¸ì—”ë“œ í†µí•©**
   - Login/Register í˜ì´ì§€ êµ¬í˜„
   - OAuth ë²„íŠ¼ ì¶”ê°€
   - 2FA QR ì½”ë“œ ìŠ¤ìº” UI

---

**ë¬¸ì„œ ì‘ì„± ì™„ë£Œ**: 2025-11-21  
**ì´ ì‘ì—… ì‹œê°„**: ì•½ 2ì‹œê°„  
**ë‹¤ìŒ ì‘ì—…**: í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ ë° í†µí•© í…ŒìŠ¤íŠ¸
